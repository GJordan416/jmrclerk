<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>United States District Court - PACER Staff Case Entry</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
</head>
<body class="bg-gray-100 text-gray-900">
<header class="bg-blue-900 text-white p-4">
<div class="max-w-6xl mx-auto flex items-center justify-between">
<div class="flex items-center gap-3">
<img src="ao-seal.png" alt="Court Seal" class="w-12 h-12" />
<div>
<h1 class="text-2xl font-bold">PACER Case Entry System</h1>
<p class="text-xs">United States District Court – Chambers of Chief Judge Jake Robinson</p>
</div>
</div>
<div class="flex items-center gap-3">
<span id="userBadge" class="hidden px-2 py-1 rounded bg-blue-700 text-white text-xs"></span>
<button id="loginBtn" class="bg-white text-blue-900 px-3 py-1 rounded hover:bg-gray-100 text-sm">Sign in</button>
<button id="logoutBtn" class="hidden bg-white text-blue-900 px-3 py-1 rounded hover:bg-gray-100 text-sm">Sign out</button>
</div>
</div>
<p class="text-center text-xs mt-2 opacity-90">Confidential Court Information – For Internal Use Only</p>
</header>

<main class="p-6 max-w-6xl mx-auto">
<section class="mb-8">
<h2 class="text-xl font-semibold mb-4">New / Edit Case Entry</h2>
<form id="caseForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-white p-4 rounded border">
<input type="text" id="caseNumber" placeholder="Case Number" class="p-2 border rounded" required />
<input type="text" id="caseTitle" placeholder="Case Title" class="p-2 border rounded" required />
<input type="text" id="parties" placeholder="Parties Involved" class="p-2 border rounded md:col-span-2" required />
<select id="caseType" class="p-2 border rounded" required>
<option value="">Select Case Type</option>
<option value="Civil">Civil</option>
<option value="Criminal">Criminal</option>
<option value="Bankruptcy">Bankruptcy</option>
<option value="Appeals">Appeals</option>
</select>
<input type="text" id="assignedJudge" placeholder="Assigned Judge" class="p-2 border rounded" />
<select id="caseStatus" class="p-2 border rounded">
<option value="Pending">Pending</option>
<option value="Active">Active</option>
<option value="Closed">Closed</option>
<option value="On Hold">On Hold</option>
</select>
<textarea id="caseNotes" placeholder="Internal Notes" class="p-2 border rounded md:col-span-2"></textarea>
<div class="md:col-span-2 flex gap-2">
<button type="submit" class="bg-blue-700 text-white p-2 rounded hover:bg-blue-800">Add / Update Case</button>
<button type="button" id="clearFormBtn" class="bg-gray-200 p-2 rounded hover:bg-gray-300">Clear</button>
</div>
</form>
</section>

<div class="mb-4 flex gap-2 items-center">
<label for="statusFilter">Filter by Status:</label>
<select id="statusFilter" class="p-2 border rounded" onchange="renderCases(searchInput.value)">
<option value="all">All</option>
<option value="Pending">Pending</option>
<option value="Active">Active</option>
<option value="Closed">Closed</option>
<option value="On Hold">On Hold</option>
</select>
</div>

<section class="mb-8">
<h2 class="text-xl font-semibold mb-4">Search Cases</h2>
<div class="bg-white p-4 rounded border">
<input type="text" id="searchInput" placeholder="Search by Case Number, Title, Parties, Judge" class="p-2 border rounded w-full mb-4" oninput="renderCases(this.value)" />
<div id="caseList" class="space-y-4"></div>
</div>
</section>
</main>

<script>
let cases = JSON.parse(localStorage.getItem('pacerCases')) || [];
let currentUser = JSON.parse(localStorage.getItem('pacerUser')) || null;

const loginBtn = document.getElementById('loginBtn');
const logoutBtn = document.getElementById('logoutBtn');
const userBadge = document.getElementById('userBadge');
const caseForm = document.getElementById('caseForm');
const searchInput = document.getElementById('searchInput');

function saveUser() { localStorage.setItem('pacerUser', JSON.stringify(currentUser)); }
function saveCases() { localStorage.setItem('pacerCases', JSON.stringify(cases)); }

function applyRoleUI() {
  if (currentUser) {
    userBadge.classList.remove('hidden');
    userBadge.textContent = `${currentUser.name} — ${currentUser.role}`;
    loginBtn.classList.add('hidden');
    logoutBtn.classList.remove('hidden');
  } else {
    userBadge.classList.add('hidden');
    loginBtn.classList.remove('hidden');
    logoutBtn.classList.add('hidden');
  }
}

loginBtn.addEventListener('click', () => {
  const name = prompt('Enter your name');
  const role = prompt('Enter role (Docket Clerk/Judge/Staff)');
  currentUser = { name, role };
  saveUser();
  applyRoleUI();
});

logoutBtn.addEventListener('click', () => {
  currentUser = null;
  saveUser();
  applyRoleUI();
});

caseForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const caseNumber = document.getElementById('caseNumber').value.trim();
  const caseTitle = document.getElementById('caseTitle').value.trim();
  const parties = document.getElementById('parties').value.trim();
  const caseType = document.getElementById('caseType').value;
  const assignedJudge = document.getElementById('assignedJudge').value.trim();
  const status = document.getElementById('caseStatus').value;
  const notes = document.getElementById('caseNotes').value.trim();

  if (!caseNumber || !caseTitle) return;

  const existingIndex = cases.findIndex(c => c.caseNumber === caseNumber);
  if (existingIndex >= 0) {
    cases[existingIndex] = { ...cases[existingIndex], caseTitle, parties, caseType, assignedJudge, status, notes };
  } else {
    cases.push({ caseNumber, caseTitle, parties, caseType, assignedJudge, status, notes, schedule: [] });
  }

  saveCases();
  renderCases(searchInput.value);
  caseForm.reset();
});

document.getElementById('clearFormBtn').addEventListener('click', () => caseForm.reset());

function renderCases(filter = '') {
  const caseList = document.getElementById('caseList');
  caseList.innerHTML = '';
  const statusFilter = document.getElementById('statusFilter').value;
  const f = filter.toLowerCase();

  const filtered = cases.filter(c => {
    const matchesSearch = c.caseNumber.toLowerCase().includes(f) || c.caseTitle.toLowerCase().includes(f) || (c.parties||'').toLowerCase().includes(f) || (c.assignedJudge||'').toLowerCase().includes(f);
    const matchesStatus = statusFilter === 'all' || c.status === statusFilter;
    return matchesSearch && matchesStatus;
  });

  filtered.forEach(c => {
    const div = document.createElement('div');
    div.className = 'bg-white shadow p-4 rounded border';
    div.innerHTML = `
      <h3 class="font-bold">${c.caseNumber} — ${c.caseTitle}</h3>
      <p><strong>Parties:</strong> ${c.parties}</p>
      <p><strong>Type:</strong> ${c.caseType}</p>
      <p><strong>Judge:</strong> ${c.assignedJudge || 'Chief Judge Jake Robinson'}</p>
      <p><strong>Status:</strong> ${c.status}</p>
      <p><strong>Notes:</strong> ${c.notes || 'None'}</p>
    `;
    caseList.appendChild(div);
  });
}

renderCases();
applyRoleUI();
</script>
</body>
</html>
